<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Quote Slip & Declaration</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
      background: linear-gradient(135deg, #a8d5ba 0%, #c8e6d5 100%);
      min-height: 100vh;
      padding: 20px;
    }

    .container {
      max-width: 800px;
      margin: 0 auto;
    }

    .logo-container {
      background: white;
      padding: 40px;
      text-align: center;
      margin-bottom: 20px;
      border-radius: 8px;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }

    .logo {
      max-width: 450px;
      height: auto;
    }

    .form-container {
      background: white;
      padding: 40px;
      border-radius: 8px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    }

    h1 {
      font-size: 18px;
      font-weight: 600;
      color: #333;
      margin-bottom: 10px;
      text-align: center;
    }

    .issuer-info {
      font-size: 11px;
      color: #666;
      text-align: center;
      margin-bottom: 30px;
      line-height: 1.6;
      padding-bottom: 20px;
      border-bottom: 1px solid #e0e0e0;
    }

    .form-group {
      margin-bottom: 20px;
    }

    .form-row {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 15px;
      margin-bottom: 20px;
    }

    label {
      display: block;
      font-size: 13px;
      font-weight: 600;
      color: #333;
      margin-bottom: 8px;
    }

    .required {
      color: #d32f2f;
    }

    input[type="text"],
    input[type="date"],
    select {
      width: 100%;
      padding: 10px 12px;
      border: 1px solid #ddd;
      border-radius: 4px;
      font-size: 14px;
      font-family: inherit;
      transition: border-color 0.3s;
    }

    input[type="text"]:focus,
    input[type="date"]:focus,
    select:focus {
      outline: none;
      border-color: #4CAF50;
    }

    select {
      cursor: pointer;
      background: white;
      appearance: none;
      background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6 9 12 15 18 9'%3e%3c/polyline%3e%3c/svg%3e");
      background-repeat: no-repeat;
      background-position: right 8px center;
      background-size: 16px;
      padding-right: 35px;
    }

    .helper-text {
      font-size: 11px;
      color: #666;
      margin-top: 4px;
    }

    .file-upload-container {
      margin-bottom: 20px;
    }

    .file-upload-box {
      border: 2px dashed #ccc;
      border-radius: 4px;
      padding: 40px 20px;
      text-align: center;
      background: #fafafa;
      cursor: pointer;
      transition: all 0.3s;
    }

    .file-upload-box:hover {
      border-color: #999;
      background: #f5f5f5;
    }

    .file-upload-box.dragover {
      border-color: #4CAF50;
      background: #e8f5e9;
    }

    .upload-icon {
      width: 48px;
      height: 48px;
      margin: 0 auto 15px;
      background: #8b95a5;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: 24px;
    }

    .file-upload-box h4 {
      font-size: 14px;
      font-weight: 500;
      color: #666;
      margin-bottom: 5px;
    }

    .file-upload-box p {
      font-size: 12px;
      color: #999;
      margin: 0;
    }

    .file-upload-box input[type="file"] {
      display: none;
    }

    .file-preview {
      display: none;
      margin-top: 15px;
      padding: 12px;
      background: #f0f0f0;
      border-radius: 4px;
      align-items: center;
      justify-content: space-between;
    }

    .file-preview.active {
      display: flex;
    }

    .file-info {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .file-icon {
      width: 32px;
      height: 32px;
      background: #4CAF50;
      border-radius: 4px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: 14px;
      font-weight: bold;
    }

    .file-details {
      text-align: left;
    }

    .file-name {
      font-size: 13px;
      font-weight: 500;
      color: #333;
      margin-bottom: 2px;
    }

    .file-size {
      font-size: 11px;
      color: #999;
    }

    .delete-file-btn {
      background: #f44336;
      color: white;
      border: none;
      padding: 6px 12px;
      border-radius: 4px;
      font-size: 12px;
      cursor: pointer;
      transition: background 0.3s;
    }

    .delete-file-btn:hover {
      background: #d32f2f;
    }

    .submit-divider {
      border: none;
      border-top: 1px solid #ddd;
      margin: 30px 0 20px 0;
    }

    button[type="submit"] {
      width: auto;
      min-width: 300px;
      padding: 16px 40px;
      background: linear-gradient(135deg, #5a9f8f 0%, #3d8072 100%);
      color: white;
      border: none;
      border-radius: 8px;
      font-size: 18px;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.3s;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      display: block;
      margin: 0 auto;
    }

    button[type="submit"]:hover {
      background: linear-gradient(135deg, #4d8a7d 0%, #2f6b5f 100%);
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
    }

    button[type="submit"]:disabled {
      background: #ccc;
      cursor: not-allowed;
      box-shadow: none;
    }

    .success-message {
      display: none;
      background: #d4edda;
      color: #155724;
      padding: 15px;
      border-radius: 4px;
      margin-bottom: 20px;
      text-align: center;
    }

    .error-message {
      display: none;
      background: #f8d7da;
      color: #721c24;
      padding: 15px;
      border-radius: 4px;
      margin-bottom: 20px;
    }

    .duty-disclosure {
      background: #f9f9f9;
      padding: 20px;
      border-radius: 5px;
      margin-bottom: 30px;
      border-left: 4px solid #5fa88a;
    }

    .duty-disclosure h3 {
      color: #2c3e50;
      margin-bottom: 15px;
      font-size: 16px;
      font-weight: 700;
    }

    .duty-disclosure p {
      color: #4a4a4a;
      line-height: 1.8;
      margin-bottom: 12px;
      font-size: 14px;
    }

    .duty-disclosure ul {
      margin-left: 20px;
      margin-bottom: 12px;
    }

    .duty-disclosure li {
      color: #4a4a4a;
      line-height: 1.8;
      margin-bottom: 5px;
      font-size: 14px;
    }

    .signature-container {
      margin-bottom: 30px;
    }

    .signature-wrapper {
      border: 2px solid #ddd;
      border-radius: 4px;
      background: #fafafa;
      padding: 15px;
      position: relative;
    }

    .signature-canvas {
      border: 1px solid #ccc;
      border-radius: 4px;
      background: white;
      display: block;
      cursor: crosshair;
      width: 100%;
      touch-action: none;
    }

    .signature-placeholder {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      color: #999;
      font-size: 14px;
      pointer-events: none;
      font-style: italic;
    }

    .signature-placeholder.hidden {
      display: none;
    }

    .signature-controls {
      display: flex;
      gap: 10px;
      margin-top: 10px;
    }

    .signature-controls button {
      padding: 8px 16px;
      border: none;
      border-radius: 4px;
      font-size: 13px;
      cursor: pointer;
      transition: background 0.3s;
    }

    .clear-signature-btn {
      background: #ff9800;
      color: white;
    }

    .clear-signature-btn:hover {
      background: #f57c00;
    }

    .submit-signature-btn {
      background: #4CAF50;
      color: white;
    }

    .submit-signature-btn:hover {
      background: #45a049;
    }

    .signature-preview-container {
      display: none;
      margin-top: 15px;
      padding: 15px;
      background: #f5f5f5;
      border-radius: 4px;
      align-items: center;
      justify-content: space-between;
    }

    .signature-preview-container.active {
      display: flex;
    }

    .signature-preview-img {
      max-width: 400px;
      border: 1px solid #ddd;
      border-radius: 4px;
      background: white;
    }

    .delete-signature-btn {
      background: #f44336;
      color: white;
      border: none;
      padding: 8px 16px;
      border-radius: 4px;
      font-size: 13px;
      cursor: pointer;
      transition: background 0.3s;
    }

    .delete-signature-btn:hover {
      background: #d32f2f;
    }

    .signature-drawing-area {
      display: block;
    }

    .signature-drawing-area.hidden {
      display: none;
    }

    .signature-error {
      display: none;
      color: #d32f2f;
      font-size: 12px;
      margin-top: 5px;
    }

    .signature-error.active {
      display: block;
    }

    @media (max-width: 600px) {
      .form-row {
        grid-template-columns: 1fr;
      }

      .form-container {
        padding: 20px;
      }
    }
  </style>
  <script src="https://cdn.jsdelivr.net/npm/signature_pad@4.1.7/dist/signature_pad.umd.min.js"></script>
</head>
<body>
  <div class="container">
    <div class="logo-container">
      <img src="/unlockt-logo.png" alt="Unlockt - live smarter" class="logo">
    </div>

    <div class="form-container">
      <h1>Quote Slip & Declaration</h1>
      <div class="issuer-info">
        Issued by: Unlockt Insurance Solutions Pty Ltd. | ABN 75 684 319 784 | ASIC Authorised Representative No: 1316562 Authorised representatives of | Resilium Insurance Broking Pty Ltd ABN 92 169 975 973 AFSL No: 460382
      </div>

      <div class="success-message" id="successMessage">
        Thank you! Your form has been submitted successfully.
      </div>

      <div class="error-message" id="errorMessage"></div>

      <form id="quoteSlipForm">
        <div class="form-group">
          <label style="font-weight: 600; font-size: 14px; margin-bottom: 15px;">Strata Management</label>
          <div class="form-row">
            <div>
              <input type="text" id="strataManagementName" name="strataManagementName" placeholder="Name" required>
            </div>
            <div>
              <input type="text" id="contactPerson" name="contactPerson" placeholder="Contact Person" required>
            </div>
          </div>
        </div>

        <div class="form-group">
          <label for="strataPlanNumber">Strata Plan Number</label>
          <input type="text" id="strataPlanNumber" name="strataPlanNumber" placeholder="SP" required style="max-width: 300px;">
          <div class="helper-text">Please write SP / UP before number</div>
        </div>

        <div class="file-upload-container">
          <label>Current COC</label>
          <div class="file-upload-box" id="cocUploadBox">
            <input type="file" id="cocFile" name="cocFile" accept="*/*">
            <div class="upload-icon">‚òÅÔ∏è</div>
            <h4>Browse Files</h4>
            <p>Drag and drop files here</p>
          </div>
          <div class="file-preview" id="cocPreview">
            <div class="file-info">
              <div class="file-icon">üìÑ</div>
              <div class="file-details">
                <div class="file-name" id="cocFileName"></div>
                <div class="file-size" id="cocFileSize"></div>
              </div>
            </div>
            <button type="button" class="delete-file-btn" id="deleteCoc">Delete</button>
          </div>
        </div>

        <div class="form-group">
          <label for="address">Address - Leave blank if COC has been uploaded</label>
          <input type="text" id="address" name="address" placeholder="">
        </div>

        <div class="form-group">
          <label for="streetAddressLine2">Street Address Line 2</label>
          <input type="text" id="streetAddressLine2" name="streetAddressLine2" placeholder="">
        </div>

        <div class="form-row">
          <div>
            <label for="city">City</label>
            <input type="text" id="city" name="city" placeholder="">
          </div>
          <div>
            <label for="state">State</label>
            <input type="text" id="state" name="state" placeholder="">
          </div>
        </div>

        <div class="form-group">
          <label for="postal">Postal</label>
          <input type="text" id="postal" name="postal" placeholder="">
        </div>

        <div class="form-row">
          <div>
            <label for="renewalDate">Renewal Date <span class="required">*</span></label>
            <input type="date" id="renewalDate" name="renewalDate" required>
            <div class="helper-text">Date</div>
          </div>
          <div>
            <label for="currentInsurer">Current Insurer</label>
            <select id="currentInsurer" name="currentInsurer" disabled>
              <option value="">Loading insurers...</option>
            </select>
            <div class="helper-text" id="insurerError" style="color: #d32f2f; display: none;">Failed to load insurers. Please refresh the page.</div>
          </div>
        </div>

        <div class="form-row">
          <div>
            <label for="currentBuildingSumInsured">Current Building Sum Insured $ (incl. GST)</label>
            <input type="text" id="currentBuildingSumInsured" name="currentBuildingSumInsured" placeholder="$">
          </div>
          <div>
            <label for="requestedSumInsured">Requested Sum Insured $ (incl. GST)</label>
            <input type="text" id="requestedSumInsured" name="requestedSumInsured" placeholder="$">
          </div>
        </div>

        <h3 style="color: #2c3e50; margin: 30px 0 15px 0;">Building Construction</h3>
        <div class="form-row">
          <div>
            <label for="roofType">Roof</label>
            <select id="roofType" name="roofType" disabled>
              <option value="">Loading roof types...</option>
            </select>
          </div>
          <div>
            <label for="externalWallType">External Walls</label>
            <select id="externalWallType" name="externalWallType" disabled>
              <option value="">Loading wall types...</option>
            </select>
          </div>
        </div>

        <div class="form-row">
          <div>
            <label for="floorType">Floor</label>
            <select id="floorType" name="floorType" disabled>
              <option value="">Loading floor types...</option>
            </select>
          </div>
          <div>
            <label for="buildingType">Type</label>
            <select id="buildingType" name="buildingType" disabled>
              <option value="">Loading building types...</option>
            </select>
          </div>
        </div>

        <h3 style="color: #2c3e50; margin: 30px 0 15px 0;">Year Built / No. Units / No. Floors</h3>
        <div class="form-row">
          <div>
            <label for="yearBuilt">Year Built</label>
            <select id="yearBuilt" name="yearBuilt">
              <option value="">Select</option>
            </select>
          </div>
          <div>
            <label for="numberOfLots">Number of Lots</label>
            <input type="text" id="numberOfLots" name="numberOfLots" placeholder="">
          </div>
          <div>
            <label for="numberOfFloors">Number of Floors</label>
            <input type="text" id="numberOfFloors" name="numberOfFloors" placeholder="">
          </div>
        </div>

        <h3 style="color: #2c3e50; margin: 30px 0 15px 0;">Number of Lifts</h3>
        <div class="form-row">
          <div>
            <label for="numberOfLifts">Number of Lifts</label>
            <input type="text" id="numberOfLifts" name="numberOfLifts" placeholder="">
          </div>
        </div>

        <h3 style="color: #2c3e50; margin: 30px 0 15px 0;">Facilities</h3>
        <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 15px; margin-bottom: 20px;">
          <label style="display: flex; align-items: center; gap: 8px; font-size: 14px; cursor: pointer;">
            <input type="checkbox" id="facilityPoolsSpas" name="facilityPoolsSpas" style="cursor: pointer;">
            <span>Pools/Spas</span>
          </label>
          <label style="display: flex; align-items: center; gap: 8px; font-size: 14px; cursor: pointer;">
            <input type="checkbox" id="facilityPlayground" name="facilityPlayground" style="cursor: pointer;">
            <span>Playground</span>
          </label>
          <label style="display: flex; align-items: center; gap: 8px; font-size: 14px; cursor: pointer;">
            <input type="checkbox" id="facilityGym" name="facilityGym" style="cursor: pointer;">
            <span>Gym</span>
          </label>
          <label style="display: flex; align-items: center; gap: 8px; font-size: 14px; cursor: pointer;">
            <input type="checkbox" id="facilityTennisCourt" name="facilityTennisCourt" style="cursor: pointer;">
            <span>Tennis Court</span>
          </label>
          <label style="display: flex; align-items: center; gap: 8px; font-size: 14px; cursor: pointer;">
            <input type="checkbox" id="facilityJetty" name="facilityJetty" style="cursor: pointer;">
            <span>Jetty</span>
          </label>
          <label style="display: flex; align-items: center; gap: 8px; font-size: 14px; cursor: pointer;">
            <input type="checkbox" id="facilityLake" name="facilityLake" style="cursor: pointer;">
            <span>Lake</span>
          </label>
          <label style="display: flex; align-items: center; gap: 8px; font-size: 14px; cursor: pointer;">
            <input type="checkbox" id="facilityWaterFeature" name="facilityWaterFeature" style="cursor: pointer;">
            <span>Water Feature</span>
          </label>
          <label style="display: flex; align-items: center; gap: 8px; font-size: 14px; cursor: pointer;">
            <input type="checkbox" id="facilityCarStacker" name="facilityCarStacker" style="cursor: pointer;">
            <span>Car Stacker</span>
          </label>
          <label style="display: flex; align-items: center; gap: 8px; font-size: 14px; cursor: pointer;">
            <input type="checkbox" id="facilityFireSafetySystems" name="facilityFireSafetySystems" style="cursor: pointer;">
            <span>Fire Safety Systems</span>
          </label>
          <label style="display: flex; align-items: center; gap: 8px; font-size: 14px; cursor: pointer;">
            <input type="checkbox" id="facilitySprinklers" name="facilitySprinklers" style="cursor: pointer;">
            <span>Sprinklers</span>
          </label>
          <label style="display: flex; align-items: center; gap: 8px; font-size: 14px; cursor: pointer;">
            <input type="checkbox" id="facilityEvCharges" name="facilityEvCharges" style="cursor: pointer;">
            <span>EV Charges</span>
          </label>
        </div>

        <h3 style="color: #2c3e50; margin: 30px 0 15px 0;">Required Cover</h3>
        <div style="margin-bottom: 20px;">
          <label style="display: flex; align-items: center; gap: 8px; font-size: 14px; cursor: pointer;">
            <input type="checkbox" id="requiredCoverFlood" name="requiredCoverFlood" style="cursor: pointer;">
            <span>Flood (Yes)</span>
          </label>
        </div>

        <h3 style="color: #2c3e50; margin: 30px 0 15px 0;">Disclose</h3>
        <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; margin-bottom: 20px;">
          <label style="display: flex; align-items: center; gap: 8px; font-size: 14px; cursor: pointer;">
            <input type="checkbox" id="discloseInsuranceDeclined" name="discloseInsuranceDeclined" style="cursor: pointer;">
            <span>Any Insurance previously declined</span>
          </label>
          <label style="display: flex; align-items: center; gap: 8px; font-size: 14px; cursor: pointer;">
            <input type="checkbox" id="discloseAsbestosPresent" name="discloseAsbestosPresent" style="cursor: pointer;">
            <span>Asbestos Present</span>
          </label>
          <label style="display: flex; align-items: center; gap: 8px; font-size: 14px; cursor: pointer;">
            <input type="checkbox" id="discloseHeritageListed" name="discloseHeritageListed" style="cursor: pointer;">
            <span>Heritage Listed (Yes)</span>
          </label>
        </div>

        <h3 style="color: #2c3e50; margin: 30px 0 15px 0;">Aluminium Composite Panel / EPS</h3>
        <div class="form-row">
          <div>
            <label for="acpEpsPresent">Yes/No</label>
            <input type="text" id="acpEpsPresent" name="acpEpsPresent" placeholder="">
          </div>
          <div>
            <label for="acpEpsName">Name of ACP</label>
            <input type="text" id="acpEpsName" name="acpEpsName" placeholder="">
          </div>
        </div>

        <h3 style="color: #2c3e50; margin: 30px 0 15px 0;">Current Standard Excess</h3>
        <div class="form-row">
          <div>
            <label for="currentStandardExcess">Current Standard Excess</label>
            <input type="text" id="currentStandardExcess" name="currentStandardExcess" placeholder="">
          </div>
        </div>

        <h3 style="color: #2c3e50; margin: 30px 0 15px 0;">Tick below to confirm cover is required - leave unselected if not applicable:</h3>
        <div style="margin-bottom: 20px;">
          <label style="display: flex; align-items: flex-start; gap: 8px; font-size: 14px; cursor: pointer; margin-bottom: 15px;">
            <input type="checkbox" id="coverOfficeBearers" name="coverOfficeBearers" style="cursor: pointer; margin-top: 3px;">
            <span><strong>Office Bearers Cover</strong> - Protects committee members of the Owners Corporation if they're personally sued for decisions made while doing their duties like approving repairs or managing funds.</span>
          </label>
          <label style="display: flex; align-items: flex-start; gap: 8px; font-size: 14px; cursor: pointer; margin-bottom: 15px;">
            <input type="checkbox" id="coverMachineryBreakdown" name="coverMachineryBreakdown" style="cursor: pointer; margin-top: 3px;">
            <span><strong>Machinery Breakdown</strong> - Insures against the cost of repairing or replacing mechanical and electrical equipment such as lifts, air conditioning, or water pumps, following an unexpected internal failure or malfunction defined in the policy wording.</span>
          </label>
          <label style="display: flex; align-items: flex-start; gap: 8px; font-size: 14px; cursor: pointer; margin-bottom: 15px;">
            <input type="checkbox" id="coverCatastrophe" name="coverCatastrophe" style="cursor: pointer; margin-top: 3px;">
            <span><strong>Catastrophe Insurance</strong> (provides additional cover to protect against large-scale natural disasters such as bushfires, floods, or cyclones - when the cost of rebuilding exceeds the building's sum insured due to a sudden surge in demand)</span>
          </label>
        </div>

        <h3 style="color: #2c3e50; margin: 30px 0 15px 0;">Insert Below Values</h3>
        <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; margin-bottom: 20px;">
          <div>
            <label for="coverOfficeBearersValue" style="display: block; text-align: left; font-weight: 600; margin-bottom: 8px; color: #5f6368;">Office Bearers</label>
            <select id="coverOfficeBearersValue" name="coverOfficeBearersValue" style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
              <option value="">Select</option>
              <option value="$250,000">$250,000</option>
              <option value="$500,000">$500,000</option>
              <option value="$1,000,000">$1,000,000</option>
              <option value="$2,000,000">$2,000,000</option>
              <option value="$5,000,000">$5,000,000</option>
              <option value="$10,000,000">$10,000,000</option>
            </select>
          </div>
          <div>
            <label for="coverMachineryBreakdownValue" style="display: block; text-align: left; font-weight: 600; margin-bottom: 8px; color: #5f6368;">Machinery Breakdown</label>
            <select id="coverMachineryBreakdownValue" name="coverMachineryBreakdownValue" style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
              <option value="">Select</option>
              <option value="$100,000">$100,000</option>
              <option value="Other (higher value)">Other (higher value)</option>
            </select>
          </div>
          <div>
            <label for="coverCatastropheValue" style="display: block; text-align: left; font-weight: 600; margin-bottom: 8px; color: #5f6368;">Catastrophe</label>
            <select id="coverCatastropheValue" name="coverCatastropheValue" style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
              <option value="">Select</option>
              <option value="15%">15%</option>
              <option value="30%">30%</option>
            </select>
          </div>
        </div>

        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 30px; margin: 30px 0;">
          <div>
            <label style="display: block; color: #2c3e50; font-size: 14px; margin-bottom: 12px;">
              To the best of your knowledge, are there any current or historical defects affecting the common property? E.g. structural issues, water ingress, cladding, fire protection systems <span style="color: #ff4444;">*</span>
            </label>
            <div style="display: flex; gap: 20px;">
              <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                <input type="radio" id="defectsYes" name="defectsAffectingProperty" value="Yes" style="cursor: pointer;">
                <span>Yes</span>
              </label>
              <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                <input type="radio" id="defectsNo" name="defectsAffectingProperty" value="No" style="cursor: pointer;">
                <span>No</span>
              </label>
            </div>
          </div>
          <div>
            <label style="display: block; color: #2c3e50; font-size: 14px; margin-bottom: 12px;">
              Is the Annual Fire Safety Statement (AFSS) Current and Compliant <span style="color: #ff4444;">*</span>
            </label>
            <div style="display: flex; gap: 20px;">
              <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                <input type="radio" id="afssYes" name="afssCurrent" value="Yes" style="cursor: pointer;">
                <span>Yes</span>
              </label>
              <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                <input type="radio" id="afssNo" name="afssCurrent" value="No" style="cursor: pointer;">
                <span>No</span>
              </label>
            </div>
          </div>
        </div>

        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 30px; margin: 30px 0;">
          <div>
            <label style="display: block; color: #2c3e50; font-size: 14px; margin-bottom: 12px;">
              Is the building primarily used for Residential purposes less than 20% Commercial? <span style="color: #ff4444;">*</span>
            </label>
            <div style="display: flex; gap: 20px;">
              <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                <input type="radio" id="residentialYes" name="residentialLessThan20Commercial" value="Yes" style="cursor: pointer;">
                <span>Yes</span>
              </label>
              <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                <input type="radio" id="residentialNo" name="residentialLessThan20Commercial" value="No" style="cursor: pointer;">
                <span>No</span>
              </label>
            </div>
          </div>
          <div>
            <label style="display: block; color: #2c3e50; font-size: 14px; margin-bottom: 12px;">
              Are there any current or planned major works over $500,000 that may impact insurance? <span style="color: #ff4444;">*</span>
            </label>
            <div style="display: flex; gap: 20px;">
              <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                <input type="radio" id="majorWorksYes" name="majorWorksOver500k" value="Yes" style="cursor: pointer;">
                <span>Yes</span>
              </label>
              <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                <input type="radio" id="majorWorksNo" name="majorWorksOver500k" value="No" style="cursor: pointer;">
                <span>No</span>
              </label>
            </div>
          </div>
        </div>

        <h3 style="color: #2c3e50; margin: 30px 0 15px 0;">Document Uploads</h3>
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 30px; margin-bottom: 30px;">
          <div class="file-upload-container">
            <label>Defects If applicable - Upload Relevant Docs</label>
            <div class="file-upload-box" id="defectsRelevantDocsUploadBox">
              <input type="file" id="defectsRelevantDocsFile" name="defectsRelevantDocsFile" accept="*/*">
              <div class="upload-icon">‚òÅÔ∏è</div>
              <h4>Browse Files</h4>
              <p>Drag and drop files here</p>
            </div>
            <div class="file-preview" id="defectsRelevantDocsPreview">
              <div class="file-info">
                <div class="file-icon">üìÑ</div>
                <div class="file-details">
                  <div class="file-name" id="defectsRelevantDocsFileName"></div>
                  <div class="file-size" id="defectsRelevantDocsFileSize"></div>
                </div>
              </div>
              <button type="button" class="delete-btn" id="defectsRelevantDocsDelete">Delete</button>
            </div>
          </div>

          <div class="file-upload-container">
            <label>WHS (If applicable)</label>
            <div class="file-upload-box" id="whsUploadBox">
              <input type="file" id="whsFile" name="whsFile" accept="*/*">
              <div class="upload-icon">‚òÅÔ∏è</div>
              <h4>Browse Files</h4>
              <p>Drag and drop files here</p>
            </div>
            <div class="file-preview" id="whsPreview">
              <div class="file-info">
                <div class="file-icon">üìÑ</div>
                <div class="file-details">
                  <div class="file-name" id="whsFileName"></div>
                  <div class="file-size" id="whsFileSize"></div>
                </div>
              </div>
              <button type="button" class="delete-btn" id="whsDelete">Delete</button>
            </div>
          </div>
        </div>

        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 30px; margin-bottom: 30px;">
          <div class="file-upload-container">
            <label>Claims History (Last 5 years)</label>
            <div class="file-upload-box" id="claimsHistoryUploadBox">
              <input type="file" id="claimsHistoryFile" name="claimsHistoryFile" accept="*/*">
              <div class="upload-icon">‚òÅÔ∏è</div>
              <h4>Browse Files</h4>
              <p>Drag and drop files here</p>
            </div>
            <div class="file-preview" id="claimsHistoryPreview">
              <div class="file-info">
                <div class="file-icon">üìÑ</div>
                <div class="file-details">
                  <div class="file-name" id="claimsHistoryFileName"></div>
                  <div class="file-size" id="claimsHistoryFileSize"></div>
                </div>
              </div>
              <button type="button" class="delete-btn" id="claimsHistoryDelete">Delete</button>
            </div>
          </div>

          <div class="file-upload-container">
            <label>Strata Plans</label>
            <div class="file-upload-box" id="strataPlansUploadBox">
              <input type="file" id="strataPlansFile" name="strataPlansFile" accept="*/*">
              <div class="upload-icon">‚òÅÔ∏è</div>
              <h4>Browse Files</h4>
              <p>Drag and drop files here</p>
            </div>
            <div class="file-preview" id="strataPlansPreview">
              <div class="file-info">
                <div class="file-icon">üìÑ</div>
                <div class="file-details">
                  <div class="file-name" id="strataPlansFileName"></div>
                  <div class="file-size" id="strataPlansFileSize"></div>
                </div>
              </div>
              <button type="button" class="delete-btn" id="strataPlansDelete">Delete</button>
            </div>
          </div>
        </div>

        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 30px; margin-bottom: 30px;">
          <div class="file-upload-container">
            <label>Asbestos Report</label>
            <div class="file-upload-box" id="asbestosReportUploadBox">
              <input type="file" id="asbestosReportFile" name="asbestosReportFile" accept="*/*">
              <div class="upload-icon">‚òÅÔ∏è</div>
              <h4>Browse Files</h4>
              <p>Drag and drop files here</p>
            </div>
            <div class="file-preview" id="asbestosReportPreview">
              <div class="file-info">
                <div class="file-icon">üìÑ</div>
                <div class="file-details">
                  <div class="file-name" id="asbestosReportFileName"></div>
                  <div class="file-size" id="asbestosReportFileSize"></div>
                </div>
              </div>
              <button type="button" class="delete-btn" id="asbestosReportDelete">Delete</button>
            </div>
          </div>

          <div class="file-upload-container">
            <label>Commercial Tenant List (If applicable)</label>
            <div class="file-upload-box" id="commercialTenantListUploadBox">
              <input type="file" id="commercialTenantListFile" name="commercialTenantListFile" accept="*/*">
              <div class="upload-icon">‚òÅÔ∏è</div>
              <h4>Browse Files</h4>
              <p>Drag and drop files here</p>
            </div>
            <div class="file-preview" id="commercialTenantListPreview">
              <div class="file-info">
                <div class="file-icon">üìÑ</div>
                <div class="file-details">
                  <div class="file-name" id="commercialTenantListFileName"></div>
                  <div class="file-size" id="commercialTenantListFileSize"></div>
                </div>
              </div>
              <button type="button" class="delete-btn" id="commercialTenantListDelete">Delete</button>
            </div>
          </div>
        </div>

        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 30px; margin-bottom: 30px;">
          <div class="file-upload-container">
            <label>Most Recent Valuation</label>
            <div class="file-upload-box" id="mostRecentValuationUploadBox">
              <input type="file" id="mostRecentValuationFile" name="mostRecentValuationFile" accept="*/*">
              <div class="upload-icon">‚òÅÔ∏è</div>
              <h4>Browse Files</h4>
              <p>Drag and drop files here</p>
            </div>
            <div class="file-preview" id="mostRecentValuationPreview">
              <div class="file-info">
                <div class="file-icon">üìÑ</div>
                <div class="file-details">
                  <div class="file-name" id="mostRecentValuationFileName"></div>
                  <div class="file-size" id="mostRecentValuationFileSize"></div>
                </div>
              </div>
              <button type="button" class="delete-btn" id="mostRecentValuationDelete">Delete</button>
            </div>
          </div>

          <div class="file-upload-container">
            <label>Preventative Maintenance Program (Unlockt to provide)</label>
            <div class="file-upload-box" id="preventativeMaintenanceProgramUploadBox">
              <input type="file" id="preventativeMaintenanceProgramFile" name="preventativeMaintenanceProgramFile" accept="*/*">
              <div class="upload-icon">‚òÅÔ∏è</div>
              <h4>Browse Files</h4>
              <p>Drag and drop files here</p>
            </div>
            <div class="file-preview" id="preventativeMaintenanceProgramPreview">
              <div class="file-info">
                <div class="file-icon">üìÑ</div>
                <div class="file-details">
                  <div class="file-name" id="preventativeMaintenanceProgramFileName"></div>
                  <div class="file-size" id="preventativeMaintenanceProgramFileSize"></div>
                </div>
              </div>
              <button type="button" class="delete-btn" id="preventativeMaintenanceProgramDelete">Delete</button>
            </div>
          </div>
        </div>

        <h3 style="color: #2c3e50; margin: 30px 0 15px 0;">Declaration</h3>
        
        <div style="display: flex; flex-direction: column; gap: 15px; margin-bottom: 30px;">
          <label style="display: flex; align-items: flex-start; gap: 10px; cursor: pointer;">
            <input type="checkbox" name="declarationAuthorised" style="margin-top: 3px; cursor: pointer;">
            <span style="color: #2c3e50; line-height: 1.6;">I am authorised to act on behalf of the Owners Corporation for insurance purposes</span>
          </label>

          <label style="display: flex; align-items: flex-start; gap: 10px; cursor: pointer;">
            <input type="checkbox" name="declarationAppointUnlockt" style="margin-top: 3px; cursor: pointer;">
            <span style="color: #2c3e50; line-height: 1.6;">I appoint Unlockt Insurance Solutions Pty Ltd, as the insurance risk advisor to act on behalf of the Owners Corporation for the purpose of sourcing renewal terms.</span>
          </label>

          <label style="display: flex; align-items: flex-start; gap: 10px; cursor: pointer;">
            <input type="checkbox" name="declarationAccurateInfo" style="margin-top: 3px; cursor: pointer;">
            <span style="color: #2c3e50; line-height: 1.6;">I understand that the provision of accurate and complete information is essential for insurance placement and compliance with the duty of disclosure.</span>
          </label>

          <label style="display: flex; align-items: flex-start; gap: 10px; cursor: pointer;">
            <input type="checkbox" name="declarationStrataManager" style="margin-top: 3px; cursor: pointer;">
            <span style="color: #2c3e50; line-height: 1.6;">The Strata Manager, while authorised for general strata matters. All insurance services have been provided solely by Unlockt, as an authorised representative of Resilium Insurance Broking.</span>
          </label>

          <label style="display: flex; align-items: flex-start; gap: 10px; cursor: pointer;">
            <input type="checkbox" name="declarationTrueAnswers" style="margin-top: 3px; cursor: pointer;">
            <span style="color: #2c3e50; line-height: 1.6;">I declare the answers below are true and correct to the best of my knowledge.</span>
          </label>
        </div>

        <div style="margin-bottom: 30px;">
          <label style="display: block; color: #2c3e50; font-weight: 600; margin-bottom: 5px;">
            Name <span style="color: #ff4444;">*</span>
          </label>
          <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 10px;">
            <div>
              <input type="text" id="declarationFullName" name="declarationFullName" placeholder="Full Name" required style="width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 5px; font-size: 14px;">
            </div>
            <div>
              <input type="text" id="declarationPosition" name="declarationPosition" placeholder="Position" required style="width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 5px; font-size: 14px;">
            </div>
          </div>
        </div>

        <div style="margin-bottom: 30px;">
          <label style="display: block; color: #2c3e50; font-weight: 600; margin-bottom: 15px;">
            Confirm <span style="color: #ff4444;">*</span>
          </label>
          <label style="display: flex; align-items: flex-start; gap: 10px; cursor: pointer;">
            <input type="radio" name="confirmDisclosures" value="confirmed" required style="margin-top: 3px; cursor: pointer;">
            <span style="color: #2c3e50; line-height: 1.6;">I confirm the Owners Corporation has been informed of the broker's role, commission structure, and any potential conflicts of interest, and has authorised me to receive and acknowledge these disclosures on its behalf.</span>
          </label>
        </div>

        <div class="duty-disclosure">
          <h3>DUTY OF DISCLOSURE</h3>
          <p>Before you enter into an insurance contract, you have a duty to tell the insurer anything that you know, or could reasonably be expected to know, that may affect the insurer's decision to insure you and on what terms. You have this duty until the insurer agrees to insure you.</p>
          <p>You have the same duty before you renew, extend, vary, or reinstate an insurance contract.</p>
          <p>You do not need to tell the insurer anything that:</p>
          <ul>
            <li>reduces the risk they insure you for; or</li>
            <li>is common knowledge; or</li>
            <li>the insurer knows, or should know; or</li>
            <li>the insurer waives your duty to tell them about.</li>
          </ul>
          <p>If you do not tell the insurer something:</p>
          <p>If you do not tell the insurer anything you are required to, they may cancel your contract, or reduce the amount they will pay you if you make a claim, or both.</p>
          <p>If your failure to tell the insurer is fraudulent, they may refuse to pay a claim and treat the contract as if it never existed.</p>
        </div>

        <div class="signature-container">
          <label style="display: block; color: #2c3e50; font-weight: 600; margin-bottom: 10px;">
            By signing the below I declare the information provided is true and correct to the best of my knowledge. <span style="color: #ff4444;">*</span>
          </label>
          <input type="hidden" id="signatureData" name="signatureData">
          <div class="signature-drawing-area" id="signatureDrawingArea">
            <div class="signature-wrapper">
              <canvas id="signatureCanvas" class="signature-canvas" width="700" height="200"></canvas>
              <div class="signature-placeholder" id="signaturePlaceholder">Sign here</div>
            </div>
            <div class="signature-controls">
              <button type="button" class="submit-signature-btn" id="submitSignature">Submit</button>
              <button type="button" class="clear-signature-btn" id="clearSignature">Clear</button>
            </div>
          </div>
          <div class="signature-preview-container" id="signaturePreviewContainer">
            <img id="signaturePreviewImg" class="signature-preview-img" alt="Signature Preview">
            <button type="button" class="delete-signature-btn" id="deleteSignature">Delete</button>
          </div>
          <div class="signature-error" id="signatureError">Please submit your signature</div>
        </div>

        <hr class="submit-divider">

        <button type="submit">Submit to Unlockt</button>
      </form>
    </div>
  </div>

  <script>
    function setupFileUpload(inputId, boxId, previewId, fileNameId, fileSizeId, deleteId) {
      const input = document.getElementById(inputId);
      const box = document.getElementById(boxId);
      const preview = document.getElementById(previewId);
      const fileName = document.getElementById(fileNameId);
      const fileSize = document.getElementById(fileSizeId);
      const deleteBtn = document.getElementById(deleteId);

      function formatFileSize(bytes) {
        if (bytes === 0) return '0 Bytes';
        const k = 1024;
        const sizes = ['Bytes', 'KB', 'MB', 'GB'];
        const i = Math.floor(Math.log(bytes) / Math.log(k));
        return Math.round((bytes / Math.pow(k, i)) * 100) / 100 + ' ' + sizes[i];
      }

      function handleFile(file) {
        if (file) {
          fileName.textContent = file.name;
          fileSize.textContent = formatFileSize(file.size);
          preview.classList.add('active');
          box.style.display = 'none';
        }
      }

      box.addEventListener('click', () => input.click());

      input.addEventListener('change', (e) => {
        if (e.target.files && e.target.files[0]) {
          handleFile(e.target.files[0]);
        }
      });

      box.addEventListener('dragover', (e) => {
        e.preventDefault();
        box.classList.add('dragover');
      });

      box.addEventListener('dragleave', () => {
        box.classList.remove('dragover');
      });

      box.addEventListener('drop', (e) => {
        e.preventDefault();
        box.classList.remove('dragover');
        const files = e.dataTransfer.files;
        if (files.length > 0) {
          input.files = files;
          handleFile(files[0]);
        }
      });

      deleteBtn.addEventListener('click', () => {
        input.value = '';
        preview.classList.remove('active');
        box.style.display = 'block';
      });
    }

    setupFileUpload('cocFile', 'cocUploadBox', 'cocPreview', 'cocFileName', 'cocFileSize', 'deleteCoc');
    setupFileUpload('defectsRelevantDocsFile', 'defectsRelevantDocsUploadBox', 'defectsRelevantDocsPreview', 'defectsRelevantDocsFileName', 'defectsRelevantDocsFileSize', 'defectsRelevantDocsDelete');
    setupFileUpload('whsFile', 'whsUploadBox', 'whsPreview', 'whsFileName', 'whsFileSize', 'whsDelete');
    setupFileUpload('claimsHistoryFile', 'claimsHistoryUploadBox', 'claimsHistoryPreview', 'claimsHistoryFileName', 'claimsHistoryFileSize', 'claimsHistoryDelete');
    setupFileUpload('strataPlansFile', 'strataPlansUploadBox', 'strataPlansPreview', 'strataPlansFileName', 'strataPlansFileSize', 'strataPlansDelete');
    setupFileUpload('asbestosReportFile', 'asbestosReportUploadBox', 'asbestosReportPreview', 'asbestosReportFileName', 'asbestosReportFileSize', 'asbestosReportDelete');
    setupFileUpload('commercialTenantListFile', 'commercialTenantListUploadBox', 'commercialTenantListPreview', 'commercialTenantListFileName', 'commercialTenantListFileSize', 'commercialTenantListDelete');
    setupFileUpload('mostRecentValuationFile', 'mostRecentValuationUploadBox', 'mostRecentValuationPreview', 'mostRecentValuationFileName', 'mostRecentValuationFileSize', 'mostRecentValuationDelete');
    setupFileUpload('preventativeMaintenanceProgramFile', 'preventativeMaintenanceProgramUploadBox', 'preventativeMaintenanceProgramPreview', 'preventativeMaintenanceProgramFileName', 'preventativeMaintenanceProgramFileSize', 'preventativeMaintenanceProgramDelete');

    let signaturePad;
    const canvas = document.getElementById('signatureCanvas');
    const placeholder = document.getElementById('signaturePlaceholder');
    const signatureError = document.getElementById('signatureError');
    const signatureDataInput = document.getElementById('signatureData');

    function resizeCanvas() {
      const ratio = Math.max(window.devicePixelRatio || 1, 1);
      const rect = canvas.getBoundingClientRect();
      canvas.width = rect.width * ratio;
      canvas.height = rect.height * ratio;
      canvas.getContext('2d').scale(ratio, ratio);
      canvas.style.width = rect.width + 'px';
      canvas.style.height = rect.height + 'px';
    }

    window.addEventListener('resize', resizeCanvas);
    resizeCanvas();

    signaturePad = new SignaturePad(canvas, {
      backgroundColor: 'rgb(255, 255, 255)',
      penColor: 'rgb(0, 0, 0)',
      minWidth: 1,
      maxWidth: 3,
      velocityFilterWeight: 0.7,
      minDistance: 5,
      throttle: 0
    });

    const signatureDrawingArea = document.getElementById('signatureDrawingArea');
    const signaturePreviewContainer = document.getElementById('signaturePreviewContainer');
    const signaturePreviewImg = document.getElementById('signaturePreviewImg');

    signaturePad.addEventListener('beginStroke', () => {
      placeholder.classList.add('hidden');
      signatureError.classList.remove('active');
    });

    document.getElementById('clearSignature').addEventListener('click', () => {
      signaturePad.clear();
      placeholder.classList.remove('hidden');
      signatureError.classList.remove('active');
    });

    document.getElementById('submitSignature').addEventListener('click', () => {
      if (signaturePad.isEmpty()) {
        signatureError.classList.add('active');
        return;
      }

      const data = signaturePad.toDataURL('image/png');
      signatureDataInput.value = data;
      signaturePreviewImg.src = data;
      
      signatureDrawingArea.classList.add('hidden');
      signaturePreviewContainer.classList.add('active');
      signatureError.classList.remove('active');
    });

    document.getElementById('deleteSignature').addEventListener('click', () => {
      signaturePad.clear();
      placeholder.classList.remove('hidden');
      signatureDataInput.value = '';
      signaturePreviewImg.src = '';
      
      signatureDrawingArea.classList.remove('hidden');
      signaturePreviewContainer.classList.remove('active');
      signatureError.classList.remove('active');
    });

    async function loadInsurers() {
      const select = document.getElementById('currentInsurer');
      const errorDiv = document.getElementById('insurerError');
      
      try {
        const response = await fetch('/api/insurers');
        
        if (!response.ok) {
          throw new Error('Failed to fetch insurers');
        }
        
        const insurers = await response.json();
        
        select.innerHTML = '<option value="">Please Select</option>';
        
        insurers.forEach(insurer => {
          const option = document.createElement('option');
          option.value = insurer.name;
          option.textContent = insurer.name;
          select.appendChild(option);
        });
        
        select.disabled = false;
      } catch (error) {
        console.error('Error loading insurers:', error);
        select.innerHTML = '<option value="">Please Select</option>';
        select.disabled = false;
        errorDiv.style.display = 'block';
      }
    }

    loadInsurers();

    async function loadDropdown(apiEndpoint, selectId, defaultOption = 'Please Select') {
      const select = document.getElementById(selectId);
      
      try {
        const response = await fetch(apiEndpoint);
        
        if (!response.ok) {
          throw new Error(`Failed to fetch ${selectId}`);
        }
        
        const items = await response.json();
        
        select.innerHTML = `<option value="">${defaultOption}</option>`;
        
        items.forEach(item => {
          const option = document.createElement('option');
          option.value = item.name;
          option.textContent = item.name;
          select.appendChild(option);
        });
        
        select.disabled = false;
      } catch (error) {
        console.error(`Error loading ${selectId}:`, error);
        select.innerHTML = `<option value="">${defaultOption}</option>`;
        select.disabled = false;
      }
    }

    function generateYearOptions() {
      const select = document.getElementById('yearBuilt');
      const currentYear = new Date().getFullYear();
      
      for (let year = currentYear; year >= 1850; year--) {
        const option = document.createElement('option');
        option.value = year;
        option.textContent = year;
        select.appendChild(option);
      }
    }

    loadDropdown('/api/roof-types', 'roofType');
    loadDropdown('/api/external-wall-types', 'externalWallType');
    loadDropdown('/api/floor-types', 'floorType');
    loadDropdown('/api/building-types', 'buildingType');
    generateYearOptions();

    document.getElementById('quoteSlipForm').addEventListener('submit', async (e) => {
      e.preventDefault();
      
      if (!signatureDataInput.value) {
        signatureError.textContent = 'Please submit your signature before submitting the form';
        signatureError.classList.add('active');
        signatureError.scrollIntoView({ behavior: 'smooth', block: 'center' });
        return;
      }

      signatureError.classList.remove('active');
      
      const formData = new FormData(e.target);

      const submitButton = e.target.querySelector('button[type="submit"]');
      submitButton.disabled = true;
      submitButton.textContent = 'Submitting...';

      try {
        const response = await fetch('/api/submit-quote-slip', {
          method: 'POST',
          body: formData
        });

        const result = await response.json();

        if (response.ok) {
          document.getElementById('successMessage').style.display = 'block';
          document.getElementById('errorMessage').style.display = 'none';
          e.target.reset();
          document.getElementById('cocPreview').classList.remove('active');
          document.getElementById('cocUploadBox').style.display = 'block';
          window.scrollTo(0, 0);
        } else {
          throw new Error(result.error || 'Submission failed');
        }
      } catch (error) {
        document.getElementById('errorMessage').textContent = 'Error: ' + error.message;
        document.getElementById('errorMessage').style.display = 'block';
        document.getElementById('successMessage').style.display = 'none';
      } finally {
        submitButton.disabled = false;
        submitButton.textContent = 'Submit to Unlockt';
      }
    });
  </script>
</body>
</html>
