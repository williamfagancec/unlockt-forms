<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Complete Account Setup - Unlockt</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico">
  <link rel="stylesheet" href="/css/setup-password.css">
</head>
<body>
  <div class="setup-container">
    <div class="logo">
      <img src="/unlockt-logo.png" alt="Unlockt Logo">
    </div>

    <div id="loadingState" class="loading">
      <div class="spinner"></div>
      <p>Verifying your setup link...</p>
    </div>

    <div id="setupForm" class="hidden">
      <div class="setup-header">
        <h1>Complete Account Setup</h1>
        <p>Create a secure password for your account</p>
      </div>

      <div id="alertContainer"></div>

      <div class="user-info">
        <p><strong>Name:</strong> <span id="displayName"></span></p>
        <p><strong>Email:</strong> <span id="displayEmail"></span></p>
        <p><strong>Role:</strong> <span id="displayRole"></span></p>
      </div>

      <form id="passwordForm" onsubmit="setupPassword(event)">
        <div class="form-group">
          <label class="form-label">New Password *</label>
          <input 
            type="password" 
            class="form-input" 
            id="password" 
            required
            oninput="validatePassword()"
          >
        </div>

        <div class="form-group">
          <label class="form-label">Confirm Password *</label>
          <input 
            type="password" 
            class="form-input" 
            id="confirmPassword" 
            required
            oninput="validatePassword()"
          >
        </div>

        <div class="password-requirements">
          <h4>Password Requirements:</h4>
          <div class="requirement" id="req-length">At least 8 characters long</div>
          <div class="requirement" id="req-uppercase">Contains uppercase letter</div>
          <div class="requirement" id="req-lowercase">Contains lowercase letter</div>
          <div class="requirement" id="req-number">Contains number</div>
          <div class="requirement" id="req-special">Contains special character (!@#$%^&*)</div>
          <div class="requirement" id="req-match">Passwords match</div>
        </div>

        <button type="submit" class="btn-submit" id="submitBtn" disabled>
          Complete Setup
        </button>
      </form>
    </div>

    <div id="expiredState" class="hidden">
      <div class="setup-header">
        <h1>Link Expired</h1>
        <p>This setup link has expired or is invalid.</p>
      </div>
      <div class="alert alert-error">
        Please contact your administrator to resend the setup link.
      </div>
    </div>
  </div>

  <script src="/js/password-validation.js"></script>
  <script src="/js/setup-password.js"></script>
</body>
</html>
